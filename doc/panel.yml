swagger: '2.0'
info:
    title: LARP GAME PANEL API
    version: '1.0.0'
schemes:
    - http
basePath:
    /panel
consumes:
    - application/json
profuces:
    - application/json
definitions:
    GamePlace:
        properties:
            id:
                type: integer
                format: int32
            game_id:
                type: string
            name:
                type: string
            is_hiding:
                type: boolean
            owner:
                type: integer
                format: int32
            hiding_keys:
                type: array
                items:
                    type: string
            type:
                type: string
            allow_type:
                type: string
            allow_ids:
                type: array
                items:
                    type: integer
                    format: int32
    CreateGamePlace:
        properties:
            name:
                type: string
            is_hiding:
                type: boolean
            owner:
                type: integer
                format: int32
            hiding_keys:
                type: array
                items:
                    type: string
            type:
                type: string
            allow_type:
                type: string
            allow_ids:
                type: array
                items:
                    type: integer
                    format: int32
    UpdateGamePlace:
        properties:
            name:
                type: string
            is_hiding:
                type: boolean
            owner:
                type: integer
                format: int32
            hiding_keys:
                type: array
                items:
                    type: string
            type:
                type: string
            allow_type:
                type: string
            allow_ids:
                type: array
                items:
                    type: integer
                    format: int32
    PlaceClue:
        properties:
            id:
                type: integer
                format: int32
            place_id:
                type: integer
            order_score:
                type: integer
            content:
                type: string
            imgs:
                type: array
                items:
                    type: string
    CreatePlaceClue:
        properties:
            order_score:
                type: integer
            content:
                type: string
            imgs:
                type: array
                items:
                    type: string
    UpdatePlaceClue:
        properties:
            order_score:
                type: integer
            content:
                type: string
            imgs:
                type: array
                items:
                    type: string
    PlaceFile:
        properties:
            id:
                type: integer
                format: int32
            place_id:
                type: integer
            name:
                type: string
            content:
                type: string
            imgs:
                type: array
                items:
                    type: string
    CreatePlaceFile:
        properties:
            name:
                type: string
            content:
                type: string
            imgs:
                type: array
                items:
                    type: string
    UpdatePlaceFile:
        properties:
            name:
                type: string
            content:
                type: string
            imgs:
                type: array
                items:
                    type: string
    GameRole:
        properties:
            id:
                type: integer
                format: int32
            game_id:
                type: string
            name:
                type: string
            _avatar:
                type: string
            true_name:
                type: string
            profession_id:
                type: integer
                format: int32
            hidden_profession_id:
                type: integer
                format: int32
            summary:
                type: string
            desc:
                type: string
            play_script:
                type: array
                items:
                    type: string
    CreateGameRole:
        properties:
            name:
                type: string
            _avatar:
                type: string
            true_name:
                type: string
            profession_id:
                type: integer
                format: int32
            hidden_profession_id:
                type: integer
                format: int32
            summary:
                type: string
            desc:
                type: string
            play_script:
                type: array
                items:
                    type: string
    UpdateGameRole:
        properties:
            name:
                type: string
            _avatar:
                type: string
            true_name:
                type: string
            profession_id:
                type: integer
                format: int32
            hidden_profession_id:
                type: integer
                format: int32
            summary:
                type: string
            desc:
                type: string
            play_script:
                type: array
                items:
                    type: string
    LarpGame:
        properties:
            id:
                type: string
            name:
                type: string
            icon:
                type: string
            description:
                type: string
            summary:
                type: string
            others:
                type: string
            price:
                type: integer
                format: int32
            min_required_num:
                type: integer
                format: int32
            max_required_num:
                type: integer
                format: int32
            ap_num:
                type: integer
                format: int32
            player_manual:
                type: string
            manager_manual:
                type: string
            mission_manual:
                type: string
            type:
                type: string
    CreateLarpGame:
        required:
            - name
        properties:
            name:
                type: string
            icon:
                type: string
            description:
                type: string
            summary:
                type: string
            others:
                type: string
            price:
                type: integer
                format: int32
            min_required_num:
                type: integer
                format: int32
            max_required_num:
                type: integer
                format: int32
            ap_num:
                type: integer
                format: int32
            player_manual:
                type: string
            manager_manual:
                type: string
            mission_manual:
                type: string
            type:
                type: string
    UpdateLarpGame:
        properties:
            name:
                type: string
            icon:
                type: string
            description:
                type: string
            summary:
                type: string
            others:
                type: string
            price:
                type: integer
                format: int32
            min_required_num:
                type: integer
                format: int32
            max_required_num:
                type: integer
                format: int32
            ap_num:
                type: integer
                format: int32
            player_manual:
                type: string
            manager_manual:
                type: string
            mission_manual:
                type: string
            type:
                type: string
    Profession:
        properties:
            id:
                type: integer
                format: int32
            name:
                type: string
    CreateProfession:
        properties:
            name:
                type: string
    UpdateProfession:
        properties:
            name:
                type: string
    Success:
        properties:
            ok:
                type: boolean
    Error:
        properties:
            error_code:
                type: string
            message:
                type: string
            text:
                type: string
    None:
        type: object
parameters:
    AccessToken:
        name: Authorization
        in: header
        required: true
        type: string
    AccessTokenOptional:
        name: Authorization
        in: header
        required: false
        type: string
    Authorization:
        description: 格式 (Basic hashkey) 注 hashkey为client_id + client_secret 做BASE64处理
        in: header
        name: Authorization
        required: true
        type: string
    int_id_in_path:
        description: int id in path
        name: id
        in: path
        required: true
        type: integer
    string_id_in_path:
        description: string id in path
        name: id
        in: path
        required: true
        type: string
    role_id_in_path:
        description: role id in path
        name: role_id
        in: path
        required: true
        type: integer
    place_id_in_path:
        description: place id in path
        name: place_id
        in: path
        required: true
        type: integer
    source_in_query:
        description: source in query
        name: source
        in: query
        required: false
        type: string
        enum:
            - wxapp
            - weixin
            - ios
            - android
    voice_id_in_path:
        description: voice id in path
        name: id
        in: path
        required: true
        type: string
    tenant_id_in_path:
        description: tenant id in path
        name: tenant_id
        in: path
        required: true
        type: string
    question_id_in_path:
        description: question id in path
        name: id
        in: path
        required: true
        type: string
    answer_id_in_query_required:
        description: answer id in query
        name: id
        in: query
        required: true
        type: string
    order_type_in_query:
        description: order type in query
        name: order_by
        in: query
        type: string
        default: score
        enum:
            - latest
            - default
            - visitor_count
            - date_answered
            - listenings_count
            - score
    start_time_in_query:
        description: 开始时间 格式为 '2016-01-01'
        name: start_time
        in: query
        type: string
        format: date
    end_time_in_query:
        description: 开始时间 格式为 '2016-01-01'
        name: end_time
        in: query
        type: string
        format: date
    key_word_in_query:
        description: key word in query
        name: kw
        in: query
        type: string
        maxLength: 30
    page:
        description: page number
        name: page
        in: query
        required: false
        type: integer
        format: int32
        maximum: 10000
    per_page:
        description: per_page number
        name: per_page
        in: query
        required: false
        type: integer
        format: int32
        maximum: 100
    offset:
        description: offset number
        name: offset
        in: query
        required: false
        format: int32
        type: integer
    limit:
        description: limit number
        name: limit
        in: query
        required: false
        type: integer
        format: int32
        maximum: 100
securityDefinitions:
    OAuth2:
        type: oauth2
        flow: password
        tokenUrl: https://apis.zaih.com/apis/open/v1/oauth/token
        scopes:
            open: 开放API
            panel: 后台API
            backend: backend API
paths:
    /games:
        get:
            summary: 游戏列表
            description: 返回游戏列表
            tags: [GAMES]
            operationdId: get_games
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/offset'
                - $ref: '#/parameters/limit'
                - $ref: '#/parameters/page'
                - $ref: '#/parameters/per_page'
            responses:
                200:
                    description: 游戏列表
                    schema:
                        type: array
                        items:
                            $ref: '#/definitions/LarpGame'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        post:
            summary: 创建一个新游戏
            description: 创建一个新游戏
            tags: [GAMES]
            operationdId: create_game
            parameters:
                - $ref: '#/parameters/AccessToken'
                - name: create_game
                  in: body
                  required: true
                  schema:
                      $ref: '#/definitions/CreateLarpGame'
            responses:
                201:
                    description: 游戏详情
                    schema:
                        $ref: '#/definitions/LarpGame'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
    /games/{id}:
        get:
            summary: 游戏详情
            tags: [GAMES]
            operationdId: get_larp_name
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/string_id_in_path'
            responses:
                200:
                    schema:
                        $ref: '#/definitions/LarpGame'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        put:
            summary: 帖子游戏详情
            tags: [GAMES]
            operationdId: put_larp_name
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/string_id_in_path'
                - name: update_post
                  in: body
                  required: true
                  schema:
                      $ref: '#/definitions/UpdateLarpGame'
            responses:
                200:
                    schema:
                        $ref: '#/definitions/LarpGame'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
    /games/{id}/roles:
        get:
            summary: 游戏角色列表
            description: 游戏角色列表
            tags: [GAMES]
            operationdId: get_games_roles
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/string_id_in_path'
                - $ref: '#/parameters/offset'
                - $ref: '#/parameters/limit'
                - $ref: '#/parameters/page'
                - $ref: '#/parameters/per_page'
            responses:
                200:
                    description: 游戏角色列表
                    schema:
                        type: array
                        items:
                            $ref: '#/definitions/GameRole'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        post:
            summary: 创建一个新游戏角色
            description: 创建一个新游戏角色
            tags: [GAMES]
            operationdId: create_game
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/string_id_in_path'
                - name: create_game
                  in: body
                  required: true
                  schema:
                      $ref: '#/definitions/CreateGameRole'
            responses:
                201:
                    description: 游戏详情
                    schema:
                        $ref: '#/definitions/GameRole'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
    /roles/{role_id}:
        get:
            summary: 游戏角色详情
            tags: [GAMES]
            operationdId: get_game_roles
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/role_id_in_path'
            responses:
                200:
                    schema:
                        $ref: '#/definitions/GameRole'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        put:
            summary: 更新游戏角色详情
            tags: [GAMES]
            operationdId: put_game_role
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/role_id_in_path'
                - name: update_game_roles
                  in: body
                  required: true
                  schema:
                      $ref: '#/definitions/UpdateGameRole'
            responses:
                200:
                    schema:
                        $ref: '#/definitions/GameRole'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        delete:
            summary: 删除游戏角色
            tags: [GAMES]
            operationdId: delete_game_role
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/role_id_in_path'
            responses:
                204:
                    schema:
                        $ref: '#/definitions/Success'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
    /games/{id}/places:
        get:
            summary: 游戏地点列表
            description: 游戏地点列表
            tags: [GAMES]
            operationdId: get_games_places
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/string_id_in_path'
                - $ref: '#/parameters/offset'
                - $ref: '#/parameters/limit'
                - $ref: '#/parameters/page'
                - $ref: '#/parameters/per_page'
            responses:
                200:
                    description: 游戏地点列表
                    schema:
                        type: array
                        items:
                            $ref: '#/definitions/GamePlace'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        post:
            summary: 创建一个新游戏地点
            description: 创建一个新游戏地点
            tags: [GAMES]
            operationdId: create_game
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/string_id_in_path'
                - name: create_game
                  in: body
                  required: true
                  schema:
                      $ref: '#/definitions/CreateGamePlace'
            responses:
                201:
                    description: 游戏详情
                    schema:
                        $ref: '#/definitions/GamePlace'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
    /places/{place_id}:
        get:
            summary: 游戏地点详情
            tags: [GAMES]
            operationdId: get_game_places
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/place_id_in_path'
            responses:
                200:
                    schema:
                        $ref: '#/definitions/GamePlace'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        put:
            summary: 更新游戏地点详情
            tags: [GAMES]
            operationdId: put_game_place
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/place_id_in_path'
                - name: update_game_places
                  in: body
                  required: true
                  schema:
                      $ref: '#/definitions/UpdateGamePlace'
            responses:
                200:
                    schema:
                        $ref: '#/definitions/GamePlace'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        delete:
            summary: 删除游戏地点
            tags: [GAMES]
            operationdId: delete_game_place
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/place_id_in_path'
            responses:
                204:
                    schema:
                        $ref: '#/definitions/Success'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
    /places/{id}/clue:
        get:
            summary: 游戏地点的线索
            description: 游戏地点的线索
            tags: [GAMES]
            operationdId: get_places_clue
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/int_id_in_path'
                - $ref: '#/parameters/offset'
                - $ref: '#/parameters/limit'
                - $ref: '#/parameters/page'
                - $ref: '#/parameters/per_page'
            responses:
                200:
                    description: 游戏地点的线索
                    schema:
                        type: array
                        items:
                            $ref: '#/definitions/PlaceClue'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        post:
            summary: 创建一个游戏地点的线索
            description: 创建一个游戏地点的线索
            tags: [GAMES]
            operationdId: create_places_clue
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/int_id_in_path'
                - name: create_places_clue
                  in: body
                  required: true
                  schema:
                      $ref: '#/definitions/CreatePlaceClue'
            responses:
                201:
                    description: 游戏地点的线索
                    schema:
                        $ref: '#/definitions/PlaceClue'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
    /clue/{id}:
        get:
            summary: 游戏地点线索
            tags: [GAMES]
            operationdId: get_places_clue
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/int_id_in_path'
            responses:
                200:
                    schema:
                        $ref: '#/definitions/PlaceClue'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        put:
            summary: 更新游戏地点线索
            tags: [GAMES]
            operationdId: put_places_clue
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/int_id_in_path'
                - name: update_places_clue
                  in: body
                  required: true
                  schema:
                      $ref: '#/definitions/UpdatePlaceClue'
            responses:
                200:
                    schema:
                        $ref: '#/definitions/PlaceClue'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        delete:
            summary: 删除游戏地点线索
            tags: [GAMES]
            operationdId: delete_places_clue
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/int_id_in_path'
            responses:
                204:
                    schema:
                        $ref: '#/definitions/Success'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
    /places/{id}/file:
        get:
            summary: 游戏地点的线索
            description: 游戏地点的线索
            tags: [GAMES]
            operationdId: get_places_file
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/int_id_in_path'
                - $ref: '#/parameters/offset'
                - $ref: '#/parameters/limit'
                - $ref: '#/parameters/page'
                - $ref: '#/parameters/per_page'
            responses:
                200:
                    description: 游戏地点的线索
                    schema:
                        type: array
                        items:
                            $ref: '#/definitions/PlaceFile'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        post:
            summary: 创建一个游戏地点的线索
            description: 创建一个游戏地点的线索
            tags: [GAMES]
            operationdId: create_places_file
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/int_id_in_path'
                - name: create_places_file
                  in: body
                  required: true
                  schema:
                      $ref: '#/definitions/CreatePlaceFile'
            responses:
                201:
                    description: 游戏地点的线索
                    schema:
                        $ref: '#/definitions/PlaceFile'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
    /file/{id}:
        get:
            summary: 游戏地点线索
            tags: [GAMES]
            operationdId: get_places_file
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/int_id_in_path'
            responses:
                200:
                    schema:
                        $ref: '#/definitions/PlaceFile'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        put:
            summary: 更新游戏地点线索
            tags: [GAMES]
            operationdId: put_places_file
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/int_id_in_path'
                - name: update_places_file
                  in: body
                  required: true
                  schema:
                      $ref: '#/definitions/UpdatePlaceFile'
            responses:
                200:
                    schema:
                        $ref: '#/definitions/PlaceFile'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        delete:
            summary: 删除游戏地点线索
            tags: [GAMES]
            operationdId: delete_places_file
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/int_id_in_path'
            responses:
                204:
                    schema:
                        $ref: '#/definitions/Success'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
    /professions:
        get:
            summary: 职业
            description: 职业
            tags: [GAMES]
            operationdId: get_professions
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/offset'
                - $ref: '#/parameters/limit'
                - $ref: '#/parameters/page'
                - $ref: '#/parameters/per_page'
            responses:
                200:
                    description: 职业列表
                    schema:
                        type: array
                        items:
                            $ref: '#/definitions/Profession'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        post:
            summary: 创建职业
            description: 创建职业
            tags: [GAMES]
            operationdId: create_professions
            parameters:
                - $ref: '#/parameters/AccessToken'
                - name: create_profession
                  in: body
                  required: true
                  schema:
                      $ref: '#/definitions/CreateProfession'
            responses:
                201:
                    description: 职业
                    schema:
                        $ref: '#/definitions/Profession'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
    /professions/{id}:
        get:
            summary: 职业详情
            tags: [GAMES]
            operationdId: get_professions
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/int_id_in_path'
            responses:
                200:
                    schema:
                        $ref: '#/definitions/Profession'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        put:
            summary: 更新游戏角色详情
            tags: [GAMES]
            operationdId: put_professions
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/int_id_in_path'
                - name: update_game_roles
                  in: body
                  required: true
                  schema:
                      $ref: '#/definitions/UpdateProfession'
            responses:
                200:
                    schema:
                        $ref: '#/definitions/Profession'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]
        delete:
            summary: 删除职业
            tags: [GAMES]
            operationdId: delete_professions
            parameters:
                - $ref: '#/parameters/AccessToken'
                - $ref: '#/parameters/int_id_in_path'
            responses:
                204:
                    schema:
                        $ref: '#/definitions/Success'
                default:
                    description: Unexpected Error
                    schema:
                        $ref: '#/definitions/Error'
            security:
                - OAuth2: [panel]